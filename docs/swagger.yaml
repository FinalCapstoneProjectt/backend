basePath: /api/v1
definitions:
  ai_checker.ProposalCheckRequest:
    properties:
      objectives:
        example: Project objectives text
        type: string
      title:
        example: Project Title
        type: string
    required:
    - objectives
    - title
    type: object
  auth.LoginRequest:
    properties:
      email:
        type: string
      password:
        type: string
    required:
    - email
    - password
    type: object
  auth.LoginResponse:
    properties:
      expires_at:
        type: string
      token:
        type: string
      user:
        $ref: '#/definitions/domain.User'
    type: object
  auth.RegisterRequest:
    properties:
      department_id:
        type: integer
      email:
        type: string
      name:
        type: string
      password:
        minLength: 8
        type: string
      role:
        description: Swagger example
        example: student
        type: string
      university_id:
        type: integer
    required:
    - email
    - name
    - password
    - role
    - university_id
    type: object
  departments.CreateDepartmentRequest:
    properties:
      code:
        type: string
      name:
        type: string
      university_id:
        type: integer
    required:
    - name
    - university_id
    type: object
  departments.UpdateDepartmentRequest:
    properties:
      code:
        type: string
      name:
        type: string
    type: object
  domain.Department:
    properties:
      code:
        description: e.g., CSE, SE
        type: string
      created_at:
        type: string
      id:
        type: integer
      name:
        type: string
      university:
        $ref: '#/definitions/domain.University'
      university_id:
        type: integer
      updated_at:
        type: string
    type: object
  domain.Feedback:
    properties:
      comment:
        type: string
      created_at:
        type: string
      decision:
        $ref: '#/definitions/domain.FeedbackDecision'
      id:
        type: integer
      is_structured:
        type: boolean
      proposal:
        $ref: '#/definitions/domain.Proposal'
      proposal_id:
        type: integer
      proposal_version_id:
        type: integer
      reviewer:
        $ref: '#/definitions/domain.User'
      reviewer_id:
        type: integer
      version:
        $ref: '#/definitions/domain.ProposalVersion'
    type: object
  domain.FeedbackDecision:
    enum:
    - approve
    - revise
    - reject
    type: string
    x-enum-varnames:
    - FeedbackDecisionApprove
    - FeedbackDecisionRevise
    - FeedbackDecisionReject
  domain.Project:
    properties:
      approved_by:
        type: integer
      approver:
        $ref: '#/definitions/domain.User'
      created_at:
        type: string
      department:
        $ref: '#/definitions/domain.Department'
      department_id:
        type: integer
      id:
        type: integer
      proposal:
        allOf:
        - $ref: '#/definitions/domain.Proposal'
        description: "\U0001F447 ADD THESE RELATIONSHIPS"
      proposal_id:
        type: integer
      share_count:
        type: integer
      summary:
        type: string
      team:
        $ref: '#/definitions/domain.Team'
      team_id:
        type: integer
      view_count:
        description: "\U0001F448 ADD THIS"
        type: integer
      visibility:
        type: string
    type: object
  domain.Proposal:
    properties:
      advisor:
        $ref: '#/definitions/domain.User'
      advisor_id:
        type: integer
      created_at:
        type: string
      created_by:
        description: "\U0001F448 Add this"
        type: integer
      id:
        type: integer
      status:
        $ref: '#/definitions/enums.ProposalStatus'
      team:
        allOf:
        - $ref: '#/definitions/domain.Team'
        description: Relationships
      team_id:
        description: ⚠️ Changed to pointer to allow NULL
        type: integer
      updated_at:
        type: string
      versions:
        items:
          $ref: '#/definitions/domain.ProposalVersion'
        type: array
    type: object
  domain.ProposalVersion:
    properties:
      abstract:
        type: string
      created_at:
        type: string
      created_by:
        type: integer
      creator:
        allOf:
        - $ref: '#/definitions/domain.User'
        description: 'Optional: Relationship'
      expected_outcomes:
        type: string
      expected_timeline:
        type: string
      file_hash:
        description: Removed "not null"
        type: string
      file_size_bytes:
        type: integer
      file_url:
        description: nullable
        type: string
      id:
        type: integer
      is_approved:
        type: boolean
      methodology:
        type: string
      objectives:
        type: string
      problem_statement:
        type: string
      proposal_id:
        type: integer
      title:
        type: string
      updated_at:
        type: string
      version_number:
        type: integer
    type: object
  domain.Team:
    properties:
      advisor:
        $ref: '#/definitions/domain.User'
      advisor_id:
        type: integer
      created_at:
        type: string
      created_by:
        type: integer
      creator:
        $ref: '#/definitions/domain.User'
      department:
        $ref: '#/definitions/domain.Department'
      department_id:
        type: integer
      id:
        type: integer
      is_finalized:
        type: boolean
      members:
        items:
          $ref: '#/definitions/domain.TeamMember'
        type: array
      name:
        type: string
      proposals:
        items:
          $ref: '#/definitions/domain.Proposal'
        type: array
    type: object
  domain.TeamMember:
    properties:
      invitation_status:
        $ref: '#/definitions/enums.InvitationStatus'
      role:
        description: '''leader'', ''member'''
        type: string
      team_id:
        type: integer
      user:
        allOf:
        - $ref: '#/definitions/domain.User'
        description: Preload User details for UI
      user_id:
        type: integer
    type: object
  domain.University:
    properties:
      academic_year:
        type: string
      ai_checker_enabled:
        type: boolean
      created_at:
        type: string
      id:
        type: integer
      name:
        type: string
      project_period:
        type: string
      updated_at:
        type: string
      visibility_rule:
        description: private, public, restricted
        type: string
    type: object
  domain.User:
    properties:
      created_at:
        type: string
      department:
        $ref: '#/definitions/domain.Department'
      department_id:
        type: integer
      email:
        type: string
      email_verified:
        type: boolean
      id:
        type: integer
      is_active:
        type: boolean
      last_login_at:
        type: string
      name:
        type: string
      profile_photo:
        type: string
      role:
        $ref: '#/definitions/enums.Role'
      student_id:
        type: string
      university:
        $ref: '#/definitions/domain.University'
      university_id:
        type: integer
      updated_at:
        type: string
    type: object
  enums.InvitationStatus:
    enum:
    - pending
    - accepted
    - rejected
    type: string
    x-enum-varnames:
    - InvitationStatusPending
    - InvitationStatusAccepted
    - InvitationStatusRejected
  enums.ProposalStatus:
    enum:
    - draft
    - submitted
    - under_review
    - revision_required
    - approved
    - rejected
    type: string
    x-enum-varnames:
    - ProposalStatusDraft
    - ProposalStatusSubmitted
    - ProposalStatusUnderReview
    - ProposalStatusRevisionRequired
    - ProposalStatusApproved
    - ProposalStatusRejected
  enums.Role:
    enum:
    - student
    - advisor
    - admin
    - public
    type: string
    x-enum-varnames:
    - RoleStudent
    - RoleAdvisor
    - RoleAdmin
    - RolePublic
  feedback.CreateFeedbackRequest:
    properties:
      comment:
        type: string
      decision:
        description: approve, revise, reject
        type: string
      proposal_id:
        type: integer
      proposal_version_id:
        type: integer
    required:
    - comment
    - decision
    - proposal_id
    - proposal_version_id
    type: object
  projects.CreateProjectRequest:
    properties:
      keywords:
        type: string
      proposal_id:
        type: integer
      summary:
        type: string
    type: object
  projects.UpdateProjectRequest:
    properties:
      summary:
        type: string
      visibility:
        type: string
    type: object
  proposals.SaveProposalRequest:
    properties:
      abstract:
        type: string
      expected_outcomes:
        type: string
      expected_timeline:
        type: string
      methodology:
        type: string
      objectives:
        type: string
      problem_statement:
        type: string
      team_id:
        description: Optional
        type: integer
      title:
        type: string
    required:
    - title
    type: object
  proposals.SubmitProposalRequest:
    properties:
      team_id:
        type: integer
    required:
    - team_id
    type: object
  response.ErrorResponse:
    properties:
      errors: {}
      message:
        example: Error message
        type: string
      success:
        example: false
        type: boolean
    type: object
  response.Response:
    properties:
      data: {}
      errors: {}
      message:
        type: string
      success:
        type: boolean
    type: object
  teams.CreateTeamRequest:
    properties:
      name:
        type: string
    required:
    - name
    type: object
  teams.InviteMemberRequest:
    properties:
      user_id:
        type: integer
    required:
    - user_id
    type: object
  teams.RespondInvitationRequest:
    properties:
      accept:
        type: boolean
    type: object
  teams.TransferLeadershipRequest:
    properties:
      new_leader_id:
        type: integer
    required:
    - new_leader_id
    type: object
  universities.CreateUniversityRequest:
    properties:
      academic_year:
        type: string
      ai_checker_enabled:
        type: boolean
      name:
        type: string
      project_period:
        type: string
      visibility_rule:
        type: string
    required:
    - name
    type: object
  universities.UpdateUniversityRequest:
    properties:
      academic_year:
        type: string
      ai_checker_enabled:
        type: boolean
      name:
        type: string
      project_period:
        type: string
      visibility_rule:
        type: string
    type: object
  users.AssignDepartmentRequest:
    properties:
      department_id:
        type: integer
    required:
    - department_id
    type: object
  users.CreateStudentRequest:
    properties:
      department_id:
        type: integer
      email:
        type: string
      name:
        type: string
      password:
        minLength: 6
        type: string
      student_id:
        type: string
      university_id:
        type: integer
    required:
    - department_id
    - email
    - name
    - password
    - student_id
    - university_id
    type: object
  users.CreateTeacherRequest:
    properties:
      department_id:
        type: integer
      email:
        type: string
      name:
        type: string
      password:
        minLength: 6
        type: string
      university_id:
        type: integer
    required:
    - department_id
    - email
    - name
    - password
    - university_id
    type: object
  users.UpdateUserStatusRequest:
    properties:
      is_active:
        type: boolean
    type: object
host: localhost:8080
info:
  contact: {}
  description: REST API for managing universities, departments, teams, proposals,
    and reviews.
  title: University Project Hub API
  version: "1.0"
paths:
  /admin/advisors:
    get:
      description: Admin sees list of advisors in their department with current team
        counts
      produces:
      - application/json
      responses: {}
      security:
      - BearerAuth: []
      summary: List advisors with workload
      tags:
      - Admin - Users
  /admin/stats:
    get:
      description: Aggregated stats for the Department Head dashboard
      produces:
      - application/json
      responses: {}
      security:
      - BearerAuth: []
      summary: Get admin dashboard statistics
      tags:
      - Admin
  /admin/users:
    get:
      description: Admin retrieves list of users with optional filters
      parameters:
      - description: Filter by role (admin, teacher, student)
        in: query
        name: role
        type: string
      - description: Filter by department ID
        in: query
        name: department_id
        type: integer
      - description: Filter by university ID
        in: query
        name: university_id
        type: integer
      - description: Filter by active status
        in: query
        name: is_active
        type: boolean
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.User'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List all users
      tags:
      - Admin - Users
  /admin/users/{id}:
    delete:
      description: Admin deletes a user account (use with caution)
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete user
      tags:
      - Admin - Users
    get:
      description: Admin retrieves user details by ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.User'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user by ID
      tags:
      - Admin - Users
  /admin/users/{id}/assign-department:
    post:
      consumes:
      - application/json
      description: Admin assigns a teacher or student to a department
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      - description: Department assignment
        in: body
        name: assignment
        required: true
        schema:
          $ref: '#/definitions/users.AssignDepartmentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Assign user to department
      tags:
      - Admin - Users
  /admin/users/{id}/status:
    patch:
      consumes:
      - application/json
      description: Admin controls user account activation status
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: integer
      - description: User status
        in: body
        name: status
        required: true
        schema:
          $ref: '#/definitions/users.UpdateUserStatusRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Activate or deactivate user
      tags:
      - Admin - Users
  /admin/users/student:
    post:
      consumes:
      - application/json
      description: Admin registers or approves a new student account
      parameters:
      - description: Student registration details
        in: body
        name: student
        required: true
        schema:
          $ref: '#/definitions/users.CreateStudentRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.User'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Register a new student
      tags:
      - Admin - Users
  /admin/users/teacher:
    post:
      consumes:
      - application/json
      description: Admin registers or approves a new teacher account
      parameters:
      - description: Teacher registration details
        in: body
        name: teacher
        required: true
        schema:
          $ref: '#/definitions/users.CreateTeacherRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.User'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Register a new teacher
      tags:
      - Admin - Users
  /ai-checker/health:
    get:
      description: Checks if the AI service is reachable
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "503":
          description: Service Unavailable
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: AI service health check
      tags:
      - AI Checker
  /ai-checker/proposal-check:
    post:
      consumes:
      - application/json
      description: Sends proposal title and objectives to the AI service
      parameters:
      - description: Proposal content
        in: body
        name: payload
        required: true
        schema:
          $ref: '#/definitions/ai_checker.ProposalCheckRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "502":
          description: Bad Gateway
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Analyze proposal text
      tags:
      - AI Checker
  /ai-checker/proposal-check-file:
    post:
      consumes:
      - multipart/form-data
      description: Uploads proposal PDF/DOCX file to the AI service
      parameters:
      - description: Proposal file
        in: formData
        name: file
        required: true
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "502":
          description: Bad Gateway
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Analyze proposal file
      tags:
      - AI Checker
  /auth/login:
    post:
      consumes:
      - application/json
      description: Authenticates a user and returns a JWT token.
      parameters:
      - description: Login credentials
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/auth.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/auth.LoginResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Login user
      tags:
      - Auth
  /auth/profile:
    get:
      description: Returns the profile of the currently logged-in user.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.User'
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user profile
      tags:
      - Auth
  /auth/refresh:
    post:
      consumes:
      - application/json
      description: Invalidates old token (optional) and issues a new one.
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Refresh JWT token
      tags:
      - Auth
  /auth/register:
    post:
      consumes:
      - application/json
      description: 'Register a new account. Role must be: student, advisor, admin,
        or public.'
      parameters:
      - description: Registration details
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/auth.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.User'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "409":
          description: Conflict
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Register a new user
      tags:
      - Auth
  /departments:
    get:
      description: Retrieve a list of all departments (optionally filtered by university)
      parameters:
      - description: Filter by university ID
        in: query
        name: university_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.Department'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Get all departments
      tags:
      - Departments
    post:
      consumes:
      - application/json
      description: Admin creates a new department under a university
      parameters:
      - description: Department details
        in: body
        name: department
        required: true
        schema:
          $ref: '#/definitions/departments.CreateDepartmentRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Department'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create a new department
      tags:
      - Departments
  /departments/{id}:
    delete:
      description: Admin deletes a department (use with caution)
      parameters:
      - description: Department ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete department
      tags:
      - Departments
    get:
      description: Retrieve a specific department by its ID
      parameters:
      - description: Department ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Department'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Get department by ID
      tags:
      - Departments
    put:
      consumes:
      - application/json
      description: Admin updates department information
      parameters:
      - description: Department ID
        in: path
        name: id
        required: true
        type: integer
      - description: Department update data
        in: body
        name: department
        required: true
        schema:
          $ref: '#/definitions/departments.UpdateDepartmentRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Department'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update department
      tags:
      - Departments
  /feedback:
    post:
      consumes:
      - application/json
      description: Teacher reviews proposal and submits feedback (approve, revise,
        reject)
      parameters:
      - description: Feedback details
        in: body
        name: feedback
        required: true
        schema:
          $ref: '#/definitions/feedback.CreateFeedbackRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Feedback'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Submit feedback for a proposal
      tags:
      - Feedback
  /feedback/{id}:
    get:
      description: Retrieve specific feedback details
      parameters:
      - description: Feedback ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Feedback'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get feedback by ID
      tags:
      - Feedback
  /feedback/pending:
    get:
      description: Teacher gets all proposals awaiting their review
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.Proposal'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get pending proposals for review
      tags:
      - Feedback
  /projects:
    get:
      description: Get all projects with optional filters
      parameters:
      - description: Filter by visibility (private, public)
        in: query
        name: visibility
        type: string
      - description: Filter by department ID
        in: query
        name: department_id
        type: integer
      - description: Filter by team ID
        in: query
        name: team_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.Project'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List all projects
      tags:
      - Projects
    post:
      consumes:
      - application/json
      description: Convert an approved proposal into a formal project
      parameters:
      - description: Project details
        in: body
        name: project
        required: true
        schema:
          $ref: '#/definitions/projects.CreateProjectRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Project'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create project from approved proposal
      tags:
      - Projects
  /projects/{id}:
    get:
      description: Retrieve specific project details
      parameters:
      - description: Project ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Project'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get project by ID
      tags:
      - Projects
    put:
      consumes:
      - application/json
      description: Update project summary and keywords
      parameters:
      - description: Project ID
        in: path
        name: id
        required: true
        type: integer
      - description: Updated project details
        in: body
        name: project
        required: true
        schema:
          $ref: '#/definitions/projects.UpdateProjectRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Project'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update project details
      tags:
      - Projects
  /projects/{id}/publish:
    post:
      description: Make project visible to public users
      parameters:
      - description: Project ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Publish project to public archive
      tags:
      - Projects
  /proposals:
    get:
      description: Retrieve proposals with optional filters
      parameters:
      - description: Proposal status
        in: query
        name: status
        type: string
      - description: Department ID
        in: query
        name: department_id
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.Proposal'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get proposals
      tags:
      - Proposals
    post:
      consumes:
      - application/json
      description: Creates a new proposal ID with version 1. Team is optional at this
        stage.
      parameters:
      - description: Proposal details
        in: body
        name: proposal
        required: true
        schema:
          $ref: '#/definitions/proposals.SaveProposalRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Proposal'
              type: object
      security:
      - BearerAuth: []
      summary: Create a new proposal draft
      tags:
      - Proposals
  /proposals/{id}:
    delete:
      description: Deletes a proposal if it is in Draft status
      parameters:
      - description: Proposal ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete a proposal
      tags:
      - Proposals
    get:
      description: Retrieve a specific proposal by its ID
      parameters:
      - description: Proposal ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Proposal'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get proposal by ID
      tags:
      - Proposals
    put:
      consumes:
      - application/json
      description: 'If Draft: updates existing. If Rejected/Revision: creates new
        version.'
      parameters:
      - description: Proposal ID
        in: path
        name: id
        required: true
        type: integer
      - description: Proposal details
        in: body
        name: proposal
        required: true
        schema:
          $ref: '#/definitions/proposals.SaveProposalRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Proposal'
              type: object
      security:
      - BearerAuth: []
      summary: Update proposal or create revision
      tags:
      - Proposals
  /proposals/{id}/assign:
    patch:
      consumes:
      - application/json
      produces:
      - application/json
      responses: {}
      security:
      - BearerAuth: []
      summary: Assign advisor to proposal
      tags:
      - Admin
  /proposals/{id}/feedback:
    get:
      description: Retrieve all feedback history for a specific proposal
      parameters:
      - description: Proposal ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.Feedback'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get all feedback for a proposal
      tags:
      - Feedback
  /proposals/{id}/submit:
    post:
      consumes:
      - application/json
      description: Locks proposal and sends to Admin. Requires Finalized Team.
      parameters:
      - description: Proposal ID
        in: path
        name: id
        required: true
        type: integer
      - description: Team ID Confirmation
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/proposals.SubmitProposalRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
      security:
      - BearerAuth: []
      summary: Submit proposal
      tags:
      - Proposals
  /proposals/{id}/versions:
    get:
      description: Retrieve a specific proposal by its ID
      parameters:
      - description: Proposal ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.ProposalVersion'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get proposal by ID
      tags:
      - Proposals
  /teams:
    get:
      description: Get all teams where the user is a member or creator
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.Team'
                  type: array
              type: object
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get user's teams
      tags:
      - Teams
    post:
      consumes:
      - application/json
      description: Student creates a new team and becomes the leader
      parameters:
      - description: Team details
        in: body
        name: team
        required: true
        schema:
          $ref: '#/definitions/teams.CreateTeamRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Team'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create a new team
      tags:
      - Teams
  /teams/{id}:
    get:
      description: Retrieve team details with members
      parameters:
      - description: Team ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.Team'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get team by ID
      tags:
      - Teams
  /teams/{id}/finalize:
    post:
      consumes:
      - application/json
      description: Locks the team structure so a proposal can be created. Only Leader
        can do this.
      parameters:
      - description: Team ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Finalize a team
      tags:
      - Teams
  /teams/{id}/invitation/respond:
    post:
      consumes:
      - application/json
      description: Student accepts or rejects a team invitation
      parameters:
      - description: Team ID
        in: path
        name: id
        required: true
        type: integer
      - description: Accept or reject
        in: body
        name: response
        required: true
        schema:
          $ref: '#/definitions/teams.RespondInvitationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Respond to team invitation
      tags:
      - Teams
  /teams/{id}/invite:
    post:
      consumes:
      - application/json
      description: Team leader invites a student to join the team
      parameters:
      - description: Team ID
        in: path
        name: id
        required: true
        type: integer
      - description: User to invite
        in: body
        name: invitation
        required: true
        schema:
          $ref: '#/definitions/teams.InviteMemberRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "403":
          description: Forbidden
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Invite a member to team
      tags:
      - Teams
  /teams/{id}/members:
    get:
      description: Retrieve all members of a team
      parameters:
      - description: Team ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.User'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get team members
      tags:
      - Teams
  /teams/{id}/transfer-leadership:
    post:
      consumes:
      - application/json
      description: Assign a new leader. Old leader becomes a member.
      parameters:
      - description: Team ID
        in: path
        name: id
        required: true
        type: integer
      - description: New Leader ID
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/teams.TransferLeadershipRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Transfer team leadership
      tags:
      - Teams
  /universities:
    get:
      description: Retrieve a list of all universities
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/domain.University'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Get all universities
      tags:
      - Universities
    post:
      consumes:
      - application/json
      description: Admin creates a new university with configuration settings
      parameters:
      - description: University details
        in: body
        name: university
        required: true
        schema:
          $ref: '#/definitions/universities.CreateUniversityRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Created
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.University'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create a new university
      tags:
      - Universities
  /universities/{id}:
    delete:
      description: Admin deletes a university (use with caution)
      parameters:
      - description: University ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete university
      tags:
      - Universities
    get:
      description: Retrieve a specific university by its ID
      parameters:
      - description: University ID
        in: path
        name: id
        required: true
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.University'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      summary: Get university by ID
      tags:
      - Universities
    put:
      consumes:
      - application/json
      description: Admin updates university configuration (academic year, visibility,
        AI checker)
      parameters:
      - description: University ID
        in: path
        name: id
        required: true
        type: integer
      - description: University update data
        in: body
        name: university
        required: true
        schema:
          $ref: '#/definitions/universities.UpdateUniversityRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/response.Response'
            - properties:
                data:
                  $ref: '#/definitions/domain.University'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/response.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update university settings
      tags:
      - Universities
  /users/peers:
    get:
      description: Used for populating invite dropdowns
      produces:
      - application/json
      responses: {}
      security:
      - BearerAuth: []
      summary: Get students in same department
      tags:
      - Users
schemes:
- http
securityDefinitions:
  BearerAuth:
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
